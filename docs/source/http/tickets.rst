tickets (устарел)
=================

.. attention::

    Метод tickets устарел, временно поддерживается. Используйте вместо него метод documents.


Метод возвращает все фискальные документы, полученные Контур.ОФД от кассы в заданном периоде времени.

**GET <endpoint>/v1/integration/inns/<inn>/kkts/<kktRegId>/fss/<fsId>/tickets?dateFrom=<dateFrom>&dateTo=<dateTo>**

В запросе должны быть переданы следующие параметры:

- `inn`: обязательный, ИНН организации, документы которой необходимо получить
- `kktRegId`: обязательный, РНМ кассы, документы которой необходимо получить
- `fsId`: обязательный, заводской номер фискального накопителя (ФН)
- `dateFrom`: обязательный, дата формирования фискальных документов, начиная с которой необходимо получить документы
- `dateTo`: обязательный, дата формирования фискальных документов, по которую (включительно) необходимо получить документы

Допустимые форматы для параметров `dateFrom` и `dateTo`: гггг-мм-дд, гггг.мм.дд, дд-мм-гггг, дд.мм.гггг.

Пример запроса:

::

  GET /v1/integration/inns/6699009482/kkts/0000000003065868/fss/99990788607/tickets?dateFrom=27.08.2018&dateTo=28.08.2018 HTTP/1.1
  Host: ofd-project.kontur.ru:11002
  Cache-Control: no-cache
  X-Kontur-Ofd-ApiKey: 031c1890-9hhe-435e-5h59-43091hhcd71d
  Authorization: auth.sid 77F90D0CF33SEF67SWRG87B9BBA7139F0CD76GRTY00931F2E1F0D

Для получения списка организаций и касс, к которым у пользователя есть доступ, необходимо использовать методы :doc:`organizations` и :doc:`cashboxes`.


В теле ответа возвращается список фискальных документов от касс, к которым у интегратора есть доступ. Список возвращается в виде массива JSON-объектов следующей структуры:

::

  [
    {
      Тип ФД:
        {
          Данные ФД
        }
    },
    {
      Тип ФД:
        {
          Данные ФД
        }
    }
  ]


Пример ответа:

::

  [
    {
        "openShift": {
            "code": 2,
            "user": "",
            "userInn": "6699009482",
            "operator": "Герман Илья",
            "retailPlaceAddress": "",
            "dateTime": "2018-08-27T10:00:00",
            "shiftNumber": 367,
            "kktRegId": "0000000003065868    ",
            "fiscalDriveNumber": "99990788607     ",
            "fiscalDocumentNumber": 39089,
            "fiscalSign": 2034496394,
            "id": "00000000-0000-0000-0000-000000000000"
        }
    },
    {
        "receipt": {
            "receiptCode": 3,
            "user": "ООО Золотой пятачок",
            "userInn": "6699009482",
            "requestNumber": 1,
            "dateTime": "2018-08-27T10:13:51",
            "shiftNumber": 367,
            "operationType": 1,
            "taxationType": 1,
            "operator": "Герман Илья",
            "kktRegId": "0000000003065868    ",
            "fiscalDriveNumber": "99990788607     ",
            "retailPlaceAddress": "г. Екатеринбург. ул. Малопрудная 5",
            "items": [
                {
                    "name": "Ассорти овощное помидоры,огурцы ст/б \"Золотая Долина\" 720 гр",
                    "price": 5668,
                    "quantity": 2,
                    "sum": 11336
                }
            ],
            "nds18": 1234,
            "totalSum": 11336,
            "cashTotalSum": 11336,
            "ecashTotalSum": 0,
            "fiscalDocumentNumber": 39090,
            "fiscalSign": 3635260533,
            "id": "00000000-0000-0000-0000-000000000000"
        }
    }
  ]


Возможные значения типов ФД
---------------------------

::

  {
    "fiscalReport",           //Отчет о регистрации
    "fiscalReportCorrection", //Отчёт об изменении параметров регистрации
    "openShift",              //Отчет об открытии смены
    "currentStateReport",     //Отчёт о текущем состоянии расчетов
    "receipt",                //Кассовый чек
    "receiptCorrection",      //Кассовый чек коррекции
    "bso",                    //БСО
    "bsoCorrection",          //Бланк строгой отчетности коррекции
    "closeShift",             //Отчёт о закрытии смены
    "closeArchive"            //Отчёт о закрытии фискального накопителя
  }


Набор полей для каждого типа фискальных документов приведен в разделе :doc:`../Structures`.

Если в указанном периоде не было документов, то в ответе будет пустой массив.

Для получения реквизитов фискального документа по его номеру, используйте метод :doc:`document`
