Порядок работы с API
====================

В каждом запросе к API необходимо передавать следующие данные:

1.	`auth.sid` с идентификатором пользовательской сессии, полученному по алгоритму, описанному в разделе :doc:`Authentication`,
2.	ключ интегратора. Получение ключа описано в разделе :doc:`GetAccess`.

Когда истечет срок действия пользовательской сессии, в ответ на любой запрос интегратора к API Контур.ОФД будет возвращаться ошибка HTTP с кодом 401, в теле ответа будет содержаться поле «errorCode»: 401002. В этом случае необходимо получить новый идентификатор пользовательской сессии по алгоритму, описанному в разделе :doc:`Authentication`.

Чтобы получать данные по "своим" кассам (пользователь ККТ и интегратор - один ИНН) оплата и дополнительные документы не требуются.

Чтобы получать данные по "чужим" кассам (например, по арендаторам торгового центра) необходимо:

1. Получить и оплатить счет на доступ к API. Тарификация и условия зависят от количества касс. Отправить заявку на подключение вы можете на почту ofd@skbkontur.ru
2. Получить согласие от владельца ККТ на передачу его фискальных данных. Порядок работы с согласием пользователя описан в разделе :doc:`Agreement`.

.. toctree::
   :name: Access
   :maxdepth: 1
   :caption: Особенности доступа

   Адреса и описание площадок <Endpoints>
   Согласие пользователя ККТ <Agreement>
